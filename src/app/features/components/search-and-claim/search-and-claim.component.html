<div class="flex flex-col min-h-screen bg-[#E8F2F3] scrollbar-hide overflow-y-auto">
  <div class="px-5 pt-5 pb-5">
    <h1 class="font-semibold text-2xl max-w-3xs">Search and Claim</h1>
    <mat-card class="mt-4">
      <mat-accordion>
        <mat-expansion-panel
          hideToggle
          [expanded]="true"
          (opened)="containerPanelOpened = true"
          (closed)="containerPanelOpened = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title class="text-lg">
              <span class="text-2xl mt-1">Filters</span>
            </mat-panel-title>
            <mat-icon>{{
              containerPanelOpened ? 'expand_less' : 'expand_more'
            }}</mat-icon>
          </mat-expansion-panel-header>
          <div class="flex flex-wrap items-center gap-9">
            <mat-form-field appearance="outline" class="w-full lg:w-auto">
              <mat-label>Item Type Search</mat-label>
              <input
                type="text"
                matInput
                placeholder="Enter item name"
                [(ngModel)]="searchQuery"
                (keyup.enter)="searchItems()"
              />
              <button
                mat-icon-button
                matSuffix
                (click)="searchItems()"
                aria-label="Search"
              >
                <mat-icon>search</mat-icon>
              </button>
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-full lg:w-auto">
              <mat-label>Saved Searches</mat-label>
              <mat-select [(ngModel)]="selectedSavedSearch" (selectionChange)="applySavedSearch()">
                <mat-option *ngFor="let search of savedSearches" [value]="search">
                  {{ search }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <!-- Image Upload Section -->
            <div class=" border-gray-300 flex items-center justify-center  mr-[122px]">
              <ngx-dropzone (change)="onSelect($event)">
                <ngx-dropzone-label class="text-center">Drag and drop image here or click to upload</ngx-dropzone-label>
                <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview" [removable]="true" *ngFor="let f of files" [file]="f.file" (removed)="onRemove(f)">
                  <ngx-dropzone-label class="label">{{ f.file.name }}</ngx-dropzone-label>
                </ngx-dropzone-preview>
              </ngx-dropzone>
            </div>


          <div class="flex  h-64 overflow-y-auto space-y-4">
  <div class="flex flex-col gap-4 w-full">
    <mat-card
      *ngFor="let item of categories"
      class="min-h-24 shadow-md hover:bg-gray-100 cursor-pointer flex-none p-2"
      (click)="selectCategory(item.name)"
    >
      <mat-card-header class="flex justify-center items-center custom-icon h-12">
        <mat-icon [ngStyle]="{ color: '#388d97' }" class="items-center justify-center">
          {{ getCategoryIcon(item.name) }}
        </mat-icon>
      </mat-card-header>
      <mat-card-title
        class="text-center text-sm font-medium truncate"
        [title]="item.name"
      >
        {{ item.name }}
      </mat-card-title>
    </mat-card>
  </div>
</div>
<div class="flex  flex-row">
  <button
    mat-raised-button
    color="primary"
    class="ml-auto mr-[27px]"
    (click)="searchItems()"
  >
    Search
  </button>
  <button
  mat-flat-button
  color="primary"
  class="mr-[369px]"
  (click)="saveSearch()"
>
  Save Search
</button>
  <div class="flex  flex-col">
    <button mat-raised-button color="primary"  (click)="onImportToExcel()">
      <mat-icon>upload</mat-icon> Upload Image
    </button>
  </div>
</div>
          </div>
         
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card>

  </div>
  <div *ngIf="searchResults?.length > 0" class="flex-grow mt-14 mx-3 scrollbar-hide overflow-y-auto">
    <app-data-table
      (ClaimItem)="claimItem($event)"
      (previewImage)="previewImage($event)"
      [showUnClaim]="true"
      [tableColumns]="displaycoloums"
      [isPageable]="true"
      [tableData]="searchResults"
      (sort)="handleSort($event)"
      [paginationSizes]="[5, 10, 15, 20]"
      [defaultPageSize]="15"
    ></app-data-table>
  </div>
  
  <div *ngIf="!searchResults?.length && categerorydata?.length > 0" class="flex-grow mt-5">
    <app-data-table
      [tableData]="categerorydata"
      [tableColumns]="displaycoloums"
      [isPageable]="true"
      [defaultPageSize]="15"
      (ClaimItem)="claimItem($event)"
      (previewImage)="previewImage($event)"
      (sort)="handleSort($event)"
    ></app-data-table>
  </div>
  
</div>
